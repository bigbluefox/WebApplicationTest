(function(n,t,i,r){"use strict";var e="treeview",f={},u,o;f.settings={injectStyle:!0,levels:2,expandIcon:"glyphicon glyphicon-plus",collapseIcon:"glyphicon glyphicon-minus",loadingIcon:"glyphicon glyphicon-hourglass",emptyIcon:"glyphicon",nodeIcon:"",selectedIcon:"",checkedIcon:"glyphicon glyphicon-check",partiallyCheckedIcon:"glyphicon glyphicon-expand",uncheckedIcon:"glyphicon glyphicon-unchecked",tagsClass:"badge",color:r,backColor:r,borderColor:r,changedNodeColor:"#39A5DC",onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#428bca",searchResultColor:"#D9534F",searchResultBackColor:r,highlightSelected:!0,highlightSearchResults:!0,showBorder:!0,showIcon:!0,showImage:!1,showCheckbox:!1,checkboxFirst:!1,highlightChanges:!1,showTags:!1,multiSelect:!1,preventUnselect:!1,allowReselect:!1,hierarchicalCheck:!1,propagateCheckEvent:!1,wrapNodeText:!1,onLoading:r,onLoadingFailed:r,onInitialized:r,onNodeRendered:r,onRendered:r,onDestroyed:r,onNodeChecked:r,onNodeCollapsed:r,onNodeDisabled:r,onNodeEnabled:r,onNodeExpanded:r,onNodeSelected:r,onNodeUnchecked:r,onNodeUnselected:r,onSearchComplete:r,onSearchCleared:r};f.options={silent:!1,ignoreChildren:!1};f.searchOptions={ignoreCase:!0,exactMatch:!1,revealResults:!0};f.dataUrl={method:"GET",dataType:"json",cache:!1};u=function(t,i){return this.$element=n(t),this._elementId=t.id,this._styleId=this._elementId+"-style",this._init(i),{options:this._options,init:n.proxy(this._init,this),remove:n.proxy(this._remove,this),findNodes:n.proxy(this.findNodes,this),getNodes:n.proxy(this.getNodes,this),getParents:n.proxy(this.getParents,this),getSiblings:n.proxy(this.getSiblings,this),getSelected:n.proxy(this.getSelected,this),getUnselected:n.proxy(this.getUnselected,this),getExpanded:n.proxy(this.getExpanded,this),getCollapsed:n.proxy(this.getCollapsed,this),getChecked:n.proxy(this.getChecked,this),getUnchecked:n.proxy(this.getUnchecked,this),getDisabled:n.proxy(this.getDisabled,this),getEnabled:n.proxy(this.getEnabled,this),addNode:n.proxy(this.addNode,this),addNodeAfter:n.proxy(this.addNodeAfter,this),addNodeBefore:n.proxy(this.addNodeBefore,this),removeNode:n.proxy(this.removeNode,this),updateNode:n.proxy(this.updateNode,this),selectNode:n.proxy(this.selectNode,this),unselectNode:n.proxy(this.unselectNode,this),toggleNodeSelected:n.proxy(this.toggleNodeSelected,this),collapseAll:n.proxy(this.collapseAll,this),collapseNode:n.proxy(this.collapseNode,this),expandAll:n.proxy(this.expandAll,this),expandNode:n.proxy(this.expandNode,this),toggleNodeExpanded:n.proxy(this.toggleNodeExpanded,this),revealNode:n.proxy(this.revealNode,this),checkAll:n.proxy(this.checkAll,this),checkNode:n.proxy(this.checkNode,this),uncheckAll:n.proxy(this.uncheckAll,this),uncheckNode:n.proxy(this.uncheckNode,this),toggleNodeChecked:n.proxy(this.toggleNodeChecked,this),unmarkCheckboxChanges:n.proxy(this.unmarkCheckboxChanges,this),disableAll:n.proxy(this.disableAll,this),disableNode:n.proxy(this.disableNode,this),enableAll:n.proxy(this.enableAll,this),enableNode:n.proxy(this.enableNode,this),toggleNodeDisabled:n.proxy(this.toggleNodeDisabled,this),search:n.proxy(this.search,this),getNodeById:n.proxy(this.getNodeById,this),clearSearch:n.proxy(this.clearSearch,this)}};u.prototype._init=function(t){this._tree=[];this._initialized=!1;this._options=n.extend({},f.settings,t);this._template.icon.empty.addClass(this._options.emptyIcon);this._destroy();this._subscribeEvents();this._triggerEvent("loading",null,f.options);this._load(t).then(n.proxy(function(t){return this._tree=n.extend(!0,[],t)},this),n.proxy(function(n){this._triggerEvent("loadingFailed",n,f.options)},this)).then(n.proxy(function(n){return this._setInitialStates({nodes:n},0)},this)).then(n.proxy(function(){this._render()},this))};u.prototype._load=function(t){var i=new n.Deferred;return t.data?this._loadLocalData(t,i):t.dataUrl&&this._loadRemoteData(t,i),i.promise()};u.prototype._loadRemoteData=function(t,i){n.ajax(n.extend(!0,{},f.dataUrl,t.dataUrl)).done(function(n){i.resolve(n)}).fail(function(n,t,r){i.reject(r)})};u.prototype._loadLocalData=function(t,i){i.resolve(typeof t.data=="string"?JSON.parse(t.data):n.extend(!0,[],t.data))};u.prototype._remove=function(){this._destroy();n.removeData(this,e);n("#"+this._styleId).remove()};u.prototype._destroy=function(){this._initialized&&(this._initialized=!1,this._triggerEvent("destroyed",null,f.options),this._unsubscribeEvents(),this.$wrapper.remove(),this.$wrapper=null)};u.prototype._unsubscribeEvents=function(){this.$element.off("loading");this.$element.off("loadingFailed");this.$element.off("initialized");this.$element.off("nodeRendered");this.$element.off("rendered");this.$element.off("destroyed");this.$element.off("click");this.$element.off("nodeChecked");this.$element.off("nodeCollapsed");this.$element.off("nodeDisabled");this.$element.off("nodeEnabled");this.$element.off("nodeExpanded");this.$element.off("nodeSelected");this.$element.off("nodeUnchecked");this.$element.off("nodeUnselected");this.$element.off("searchComplete");this.$element.off("searchCleared")};u.prototype._subscribeEvents=function(){if(this._unsubscribeEvents(),typeof this._options.onLoading=="function")this.$element.on("loading",this._options.onLoading);if(typeof this._options.onLoadingFailed=="function")this.$element.on("loadingFailed",this._options.onLoadingFailed);if(typeof this._options.onInitialized=="function")this.$element.on("initialized",this._options.onInitialized);if(typeof this._options.onNodeRendered=="function")this.$element.on("nodeRendered",this._options.onNodeRendered);if(typeof this._options.onRendered=="function")this.$element.on("rendered",this._options.onRendered);if(typeof this._options.onDestroyed=="function")this.$element.on("destroyed",this._options.onDestroyed);this.$element.on("click",n.proxy(this._clickHandler,this));if(typeof this._options.onNodeChecked=="function")this.$element.on("nodeChecked",this._options.onNodeChecked);if(typeof this._options.onNodeCollapsed=="function")this.$element.on("nodeCollapsed",this._options.onNodeCollapsed);if(typeof this._options.onNodeDisabled=="function")this.$element.on("nodeDisabled",this._options.onNodeDisabled);if(typeof this._options.onNodeEnabled=="function")this.$element.on("nodeEnabled",this._options.onNodeEnabled);if(typeof this._options.onNodeExpanded=="function")this.$element.on("nodeExpanded",this._options.onNodeExpanded);if(typeof this._options.onNodeSelected=="function")this.$element.on("nodeSelected",this._options.onNodeSelected);if(typeof this._options.onNodeUnchecked=="function")this.$element.on("nodeUnchecked",this._options.onNodeUnchecked);if(typeof this._options.onNodeUnselected=="function")this.$element.on("nodeUnselected",this._options.onNodeUnselected);if(typeof this._options.onSearchComplete=="function")this.$element.on("searchComplete",this._options.onSearchComplete);if(typeof this._options.onSearchCleared=="function")this.$element.on("searchCleared",this._options.onSearchCleared)};u.prototype._triggerEvent=function(t,i,r){r&&!r.silent&&this.$element.trigger(t,n.extend(!0,{},i))};u.prototype._setInitialStates=function(t,i){return this._nodes={},n.when.apply(this,this._setInitialState(t,i)).done(n.proxy(function(){this._orderedNodes=this._sortNodes();this._inheritCheckboxChanges();this._triggerEvent("initialized",this._orderedNodes,f.options);return},this))};u.prototype._setInitialState=function(t,i,u){if(t.nodes){i+=1;u=u||[];var f=t;return n.each(t.nodes,n.proxy(function(t,e){var o=new n.Deferred;u.push(o.promise());e.level=i;e.index=t;e.nodeId=f&&f.nodeId?f.nodeId+"."+e.index:i-1+"."+e.index;e.parentId=f.nodeId;e.hasOwnProperty("selectable")||(e.selectable=!0);e.hasOwnProperty("checkable")||(e.checkable=!0);e.state=e.state||{};e.state.hasOwnProperty("checked")||(e.state.checked=!1);this._options.hierarchicalCheck&&e.state.checked==="undefined"&&(e.state.checked=r);e.state.hasOwnProperty("disabled")||(e.state.disabled=!1);e.state.hasOwnProperty("expanded")||(e.state.expanded=!e.state.disabled&&i<this._options.levels&&e.nodes&&e.nodes.length>0?!0:!1);e.state.hasOwnProperty("selected")||(e.state.selected=!1);e.state.visible=f&&f.state&&f.state.expanded||i<=this._options.levels?!0:!1;e.nodes&&(e.nodes.length>0?this._setInitialState(e,i,u):delete e.nodes);this._nodes[e.nodeId]=e;o.resolve()},this)),u}};u.prototype._sortNodes=function(){return n.map(Object.keys(this._nodes).sort(function(n,t){var i;if(n===t)return 0;var n=n.split(".").map(function(n){return parseInt(n)}),t=t.split(".").map(function(n){return parseInt(n)}),u=Math.max(n.length,t.length);for(i=0;i<u;i++){if(n[i]===r)return-1;if(t[i]===r||n[i]-t[i]>0)return 1;if(n[i]-t[i]<0)return-1}}),n.proxy(function(n){return this._nodes[n]},this))};u.prototype._clickHandler=function(t){var r=n(t.target),i=this.targetNode(r),u;i&&!i.state.disabled&&(u=r.attr("class")?r.attr("class").split(" "):[],u.indexOf("expand-icon")!==-1?this._toggleExpanded(i,n.extend({},f.options)):u.indexOf("check-icon")!==-1?i.checkable&&this._toggleChecked(i,n.extend({},f.options)):i.selectable?this._toggleSelected(i,n.extend({},f.options)):this._toggleExpanded(i,n.extend({},f.options)))};u.prototype.targetNode=function(n){var i=n.closest("li.list-group-item").attr("data-nodeId"),t=this._nodes[i];return t||console.log("Error: node does not exist"),t};u.prototype._toggleExpanded=function(n,t){n&&(typeof this._options.lazyLoad=="function"&&n.lazyLoad?this._lazyLoad(n):this._setExpanded(n,!n.state.expanded,t))};u.prototype._lazyLoad=function(n){n.$el.children("span.expand-icon").removeClass(this._options.expandIcon).addClass(this._options.loadingIcon);var t=this;this._options.lazyLoad(n,function(i){t.addNode(i,n)});delete n.lazyLoad};u.prototype._setExpanded=function(t,i,r){r&&i===t.state.expanded||(i&&t.nodes?(t.state.expanded=!0,t.$el&&t.$el.children("span.expand-icon").removeClass(this._options.expandIcon).removeClass(this._options.loadingIcon).addClass(this._options.collapseIcon),t.nodes&&r&&n.each(t.nodes,n.proxy(function(n,t){this._setVisible(t,!0,r)},this)),this._triggerEvent("nodeExpanded",t,r)):i||(t.state.expanded=!1,t.$el&&t.$el.children("span.expand-icon").removeClass(this._options.collapseIcon).addClass(this._options.expandIcon),t.nodes&&r&&n.each(t.nodes,n.proxy(function(n,t){this._setVisible(t,!1,r);this._setExpanded(t,!1,r)},this)),this._triggerEvent("nodeCollapsed",t,r)))};u.prototype._setVisible=function(n,t,i){i&&t===n.state.visible||(t?(n.state.visible=!0,n.$el&&n.$el.removeClass("node-hidden")):(n.state.visible=!1,n.$el&&n.$el.addClass("node-hidden")))};u.prototype._toggleSelected=function(n,t){if(n)return this._setSelected(n,!n.state.selected,t),this};u.prototype._setSelected=function(t,i,r){if(!r||i!==t.state.selected){if(i)this._options.multiSelect||n.each(this._findNodes("true","state.selected"),n.proxy(function(t,i){this._setSelected(i,!1,n.extend(r,{unselecting:!0}))},this)),t.state.selected=!0,t.$el&&(t.$el.addClass("node-selected"),(t.selectedIcon||this._options.selectedIcon)&&t.$el.children("span.node-icon").removeClass(t.icon||this._options.nodeIcon).addClass(t.selectedIcon||this._options.selectedIcon)),this._triggerEvent("nodeSelected",t,r);else{if(this._options.preventUnselect&&r&&!r.unselecting&&this._findNodes("true","state.selected").length===1)return this._options.allowReselect&&this._triggerEvent("nodeSelected",t,r),this;t.state.selected=!1;t.$el&&(t.$el.removeClass("node-selected"),(t.selectedIcon||this._options.selectedIcon)&&t.$el.children("span.node-icon").removeClass(t.selectedIcon||this._options.selectedIcon).addClass(t.icon||this._options.nodeIcon));this._triggerEvent("nodeUnselected",t,r)}return this}};u.prototype._inheritCheckboxChanges=function(){this._options.showCheckbox&&this._options.highlightChanges&&(this._checkedNodes=n.grep(this._orderedNodes,function(n){return n.state.checked}))};u.prototype._toggleChecked=function(t,i){var o,s,u,e,f;if(t){if(this._options.hierarchicalCheck){for(o=n.extend({},i,{silent:i.silent||!this._options.propagateCheckEvent}),u=t,t.state.checked=!t.state.checked;u=this._nodes[u.parentId];)s=u.nodes.reduce(function(n,t){return n===t.state.checked?n:r},u.nodes[0].state.checked),this._setChecked(u,s,o);if(t.nodes&&t.nodes.length>0)for(f=t.nodes.slice();f&&f.length>0;)e=f.pop(),this._setChecked(e,t.state.checked,o),e.nodes&&e.nodes.length>0&&(f=f.concat(e.nodes.slice()));t.state.checked=!t.state.checked}this._setChecked(t,!t.state.checked,i)}};u.prototype._setChecked=function(n,t,i){i&&t===n.state.checked||(this._options.highlightChanges&&n.$el.toggleClass("node-check-changed",this._checkedNodes.indexOf(n)==-1==t),t?(n.state.checked=!0,n.$el&&(n.$el.addClass("node-checked").removeClass("node-checked-partial"),n.$el.children("span.check-icon").removeClass(this._options.uncheckedIcon).removeClass(this._options.partiallyCheckedIcon).addClass(this._options.checkedIcon)),this._triggerEvent("nodeChecked",n,i)):t===r&&this._options.hierarchicalCheck?(n.state.checked=r,n.$el&&(n.$el.addClass("node-checked-partial").removeClass("node-checked"),n.$el.children("span.check-icon").removeClass(this._options.uncheckedIcon).removeClass(this._options.checkedIcon).addClass(this._options.partiallyCheckedIcon)),this._triggerEvent("nodeUnchecked",n,i)):(n.state.checked=!1,n.$el&&(n.$el.removeClass("node-checked node-checked-partial"),n.$el.children("span.check-icon").removeClass(this._options.checkedIcon).removeClass(this._options.partiallyCheckedIcon).addClass(this._options.uncheckedIcon)),this._triggerEvent("nodeUnchecked",n,i)))};u.prototype._setDisabled=function(n,t,i){i&&t===n.state.disabled||(t?(n.state.disabled=!0,i&&!i.keepState&&(this._setSelected(n,!1,i),this._setChecked(n,!1,i),this._setExpanded(n,!1,i)),n.$el&&n.$el.addClass("node-disabled"),this._triggerEvent("nodeDisabled",n,i)):(n.state.disabled=!1,n.$el&&n.$el.removeClass("node-disabled"),this._triggerEvent("nodeEnabled",n,i)))};u.prototype._setSearchResult=function(n,t,i){i&&t===n.searchResult||(t?(n.searchResult=!0,n.$el&&n.$el.addClass("node-result")):(n.searchResult=!1,n.$el&&n.$el.removeClass("node-result")))};u.prototype._render=function(){this._initialized||(this.$wrapper=this._template.tree.clone(),this.$element.empty().addClass(e).append(this.$wrapper),this._injectStyle(),this._initialized=!0);var t;n.each(this._orderedNodes,n.proxy(function(n,i){this._renderNode(i,t);t=i},this));this._triggerEvent("rendered",this._orderedNodes,f.options)};u.prototype._renderNode=function(t,i){var u,e;if(t){for(t.$el?t.$el.empty():t.$el=this._newNodeEl(t,i).addClass("node-"+this._elementId),t.$el.addClass(t.class),t.id&&t.$el.attr("id",t.id),t.dataAttr&&n.each(t.dataAttr,function(n,i){t.$el.attr("data-"+n,i)}),t.$el.attr("data-nodeId",t.nodeId),t.tooltip&&t.$el.attr("title",t.tooltip),u=0;u<t.level-1;u++)t.$el.append(this._template.indent.clone());t.$el.append(t.nodes||t.lazyLoad?this._template.icon.expand.clone():this._template.icon.empty.clone());this._options.checkboxFirst?(this._addCheckbox(t),this._addIcon(t),this._addImage(t)):(this._addIcon(t),this._addImage(t),this._addCheckbox(t));this._options.wrapNodeText?(e=this._template.text.clone(),t.$el.append(e),e.append(t.text)):t.$el.append(t.text);this._options.showTags&&t.tags&&n.each(t.tags,n.proxy(function(n,i){t.$el.append(this._template.badge.clone().addClass((typeof i=="object"?i.class:r)||t.tagsClass||this._options.tagsClass).append((typeof i=="object"?i.text:r)||i))},this));this._setSelected(t,t.state.selected);this._setChecked(t,t.state.checked);this._setSearchResult(t,t.searchResult);this._setExpanded(t,t.state.expanded);this._setDisabled(t,t.state.disabled);this._setVisible(t,t.state.visible);this._triggerEvent("nodeRendered",t,f.options)}};u.prototype._addCheckbox=function(n){this._options.showCheckbox&&(n.hideCheckbox===r||n.hideCheckbox===!1)&&n.$el.append(this._template.icon.check.clone())};u.prototype._addIcon=function(n){!this._options.showIcon||this._options.showImage&&n.image||n.$el.append(this._template.icon.node.clone().addClass(n.icon||this._options.nodeIcon))};u.prototype._addImage=function(n){this._options.showImage&&n.image&&n.$el.append(this._template.image.clone().addClass("node-image").css("background-image","url('"+n.image+"')"))};u.prototype._newNodeEl=function(n,t){var i=this._template.node.clone();return t?t.$el.after(i):this.$wrapper.prepend(i),i};u.prototype._removeNodeEl=function(t){t&&(t.nodes&&n.each(t.nodes,n.proxy(function(n,t){this._removeNodeEl(t)},this)),t.$el.remove())};u.prototype._expandNode=function(t){t.nodes&&n.each(t.nodes.slice(0).reverse(),n.proxy(function(n,i){i.level=t.level+1;this._renderNode(i,t.$el)},this))};u.prototype._injectStyle=function(){this._options.injectStyle&&!i.getElementById(this._styleId)&&n('<style type="text/css" id="'+this._styleId+'"> '+this._buildStyle()+" <\/style>").appendTo("head")};u.prototype._buildStyle=function(){var t=".node-"+this._elementId+"{",i;return this._options.color&&(t+="color:"+this._options.color+";"),this._options.backColor&&(t+="background-color:"+this._options.backColor+";"),this._options.showBorder?this._options.borderColor&&(t+="border:1px solid "+this._options.borderColor+";"):t+="border:none;",t+="}",this._options.onhoverColor&&(t+=".node-"+this._elementId+":not(.node-disabled):hover{background-color:"+this._options.onhoverColor+";}"),this._options.highlightSearchResults&&(this._options.searchResultColor||this._options.searchResultBackColor)&&(i="",this._options.searchResultColor&&(i+="color:"+this._options.searchResultColor+";"),this._options.searchResultBackColor&&(i+="background-color:"+this._options.searchResultBackColor+";"),t+=".node-"+this._elementId+".node-result{"+i+"}",t+=".node-"+this._elementId+".node-result:hover{"+i+"}"),this._options.highlightSelected&&(this._options.selectedColor||this._options.selectedBackColor)&&(i="",this._options.selectedColor&&(i+="color:"+this._options.selectedColor+";"),this._options.selectedBackColor&&(i+="background-color:"+this._options.selectedBackColor+";"),t+=".node-"+this._elementId+".node-selected{"+i+"}",t+=".node-"+this._elementId+".node-selected:hover{"+i+"}"),this._options.highlightChanges&&(i="color: "+this._options.changedNodeColor+";",t+=".node-"+this._elementId+".node-check-changed{"+i+"}"),n.each(this._orderedNodes,n.proxy(function(n,i){var r;(i.color||i.backColor)&&(r="",i.color&&(r+="color:"+i.color+";"),i.backColor&&(r+="background-color:"+i.backColor+";"),t+=".node-"+this._elementId+'[data-nodeId="'+i.nodeId+'"]{'+r+"}");i.iconColor&&(r="color:"+i.iconColor+";",t+=".node-"+this._elementId+'[data-nodeId="'+i.nodeId+'"] .node-icon{'+r+"}")},this)),this._css+t};u.prototype._template={tree:n('<ul class="list-group"><\/ul>'),node:n('<li class="list-group-item"><\/li>'),indent:n('<span class="indent"><\/span>'),icon:{node:n('<span class="icon node-icon"><\/span>'),expand:n('<span class="icon expand-icon"><\/span>'),check:n('<span class="icon check-icon"><\/span>'),empty:n('<span class="icon"><\/span>')},image:n('<span class="image"><\/span>'),badge:n("<span><\/span>"),text:n('<span class="text"><\/span>')};u.prototype._css=".treeview .list-group-item{cursor:pointer}.treeview span.indent{margin-left:10px;margin-right:10px}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}";u.prototype.findNodes=function(n,t){return this._findNodes(n,t)};u.prototype.getNodes=function(){return this._orderedNodes};u.prototype.getParents=function(t){t instanceof Array||(t=[t]);var i=[];return n.each(t,n.proxy(function(n,t){var r=t.parentId?this._nodes[t.parentId]:!1;r&&i.push(r)},this)),i};u.prototype.getSiblings=function(t){t instanceof Array||(t=[t]);var i=[];return n.each(t,n.proxy(function(n,t){var r=this.getParents([t]),u=r[0]?r[0].nodes:this._tree;i=u.filter(function(n){return n.nodeId!==t.nodeId})},this)),n.map(i,function(n){return n})};u.prototype.getSelected=function(){return this._findNodes("true","state.selected")};u.prototype.getUnselected=function(){return this._findNodes("false","state.selected")};u.prototype.getExpanded=function(){return this._findNodes("true","state.expanded")};u.prototype.getCollapsed=function(){return this._findNodes("false","state.expanded")};u.prototype.getChecked=function(){return this._findNodes("true","state.checked")};u.prototype.getUnchecked=function(){return this._findNodes("false","state.checked")};u.prototype.getDisabled=function(){return this._findNodes("true","state.disabled")};u.prototype.getEnabled=function(){return this._findNodes("false","state.disabled")};u.prototype.addNode=function(t,i,r,u){t instanceof Array||(t=[t]);i instanceof Array&&(i=i[0]);u=n.extend({},f.options,u);var e;e=i&&i.nodes?i.nodes:i?i.nodes=[]:this._tree;n.each(t,n.proxy(function(n,t){var i=typeof r=="number"?r+n:e.length+1;e.splice(i,0,t)},this));this._setInitialStates({nodes:this._tree},0).done(n.proxy(function(){i&&!i.state.expanded&&this._setExpanded(i,!0,u);this._render()},this))};u.prototype.addNodeAfter=function(t,i,r){t instanceof Array||(t=[t]);i instanceof Array&&(i=i[0]);r=n.extend({},f.options,r);this.addNode(t,this.getParents(i)[0],i.index+1,r)};u.prototype.addNodeBefore=function(t,i,r){t instanceof Array||(t=[t]);i instanceof Array&&(i=i[0]);r=n.extend({},f.options,r);this.addNode(t,this.getParents(i)[0],i.index,r)};u.prototype.removeNode=function(t,i){t instanceof Array||(t=[t]);i=n.extend({},f.options,i);var r,u;n.each(t,n.proxy(function(n,t){u=this._nodes[t.parentId];r=u?u.nodes:this._tree;r.splice(t.index,1);this._removeNodeEl(t)},this));this._setInitialStates({nodes:this._tree},0).done(this._render.bind(this))};u.prototype.updateNode=function(t,i,r){t instanceof Array&&(t=t[0]);r=n.extend({},f.options,r);var u,e=this._nodes[t.parentId];u=e?e.nodes:this._tree;u.splice(t.index,1,i);this._removeNodeEl(t);this._setInitialStates({nodes:this._tree},0).done(this._render.bind(this))};u.prototype.selectNode=function(t,i){t instanceof Array||(t=[t]);i=n.extend({},f.options,i);n.each(t,n.proxy(function(n,t){this._setSelected(t,!0,i)},this))};u.prototype.unselectNode=function(t,i){t instanceof Array||(t=[t]);i=n.extend({},f.options,i);n.each(t,n.proxy(function(n,t){this._setSelected(t,!1,i)},this))};u.prototype.toggleNodeSelected=function(t,i){t instanceof Array||(t=[t]);i=n.extend({},f.options,i);n.each(t,n.proxy(function(n,t){this._toggleSelected(t,i)},this))};u.prototype.collapseAll=function(t){t=n.extend({},f.options,t);t.levels=t.levels||999;this.collapseNode(this._tree,t)};u.prototype.collapseNode=function(t,i){i=n.extend({},f.options,i);n.each(t,n.proxy(function(n,t){this._setExpanded(t,!1,i)},this))};u.prototype.expandAll=function(t){t=n.extend({},f.options,t);t.levels=t.levels||999;this.expandNode(this._tree,t)};u.prototype.expandNode=function(t,i){t instanceof Array||(t=[t]);i=n.extend({},f.options,i);n.each(t,n.proxy(function(n,t){t.state.expanded||(typeof this._options.lazyLoad=="function"&&t.lazyLoad&&this._lazyLoad(t),this._setExpanded(t,!0,i),t.nodes&&this._expandLevels(t.nodes,i.levels-1,i))},this))};u.prototype._expandLevels=function(t,i,r){t instanceof Array||(t=[t]);r=n.extend({},f.options,r);n.each(t,n.proxy(function(n,t){this._setExpanded(t,i>0?!0:!1,r);t.nodes&&this._expandLevels(t.nodes,i-1,r)},this))};u.prototype.revealNode=function(t,i){t instanceof Array||(t=[t]);i=n.extend({},f.options,i);n.each(t,n.proxy(function(n,t){for(var r=t,u;u=this.getParents([r])[0];)r=u,this._setExpanded(r,!0,i)},this))};u.prototype.toggleNodeExpanded=function(t,i){t instanceof Array||(t=[t]);i=n.extend({},f.options,i);n.each(t,n.proxy(function(n,t){this._toggleExpanded(t,i)},this))};u.prototype.checkAll=function(t){t=n.extend({},f.options,t);var i=n.grep(this._orderedNodes,function(n){return!n.state.checked});n.each(i,n.proxy(function(n,i){this._setChecked(i,!0,t)},this))};u.prototype.checkNode=function(t,i){t instanceof Array||(t=[t]);i=n.extend({},f.options,i);n.each(t,n.proxy(function(n,t){this._setChecked(t,!0,i)},this))};u.prototype.uncheckAll=function(t){t=n.extend({},f.options,t);var i=n.grep(this._orderedNodes,function(n){return n.state.checked||n.state.checked===r});n.each(i,n.proxy(function(n,i){this._setChecked(i,!1,t)},this))};u.prototype.uncheckNode=function(t,i){t instanceof Array||(t=[t]);i=n.extend({},f.options,i);n.each(t,n.proxy(function(n,t){this._setChecked(t,!1,i)},this))};u.prototype.toggleNodeChecked=function(t,i){t instanceof Array||(t=[t]);i=n.extend({},f.options,i);n.each(t,n.proxy(function(n,t){this._toggleChecked(t,i)},this))};u.prototype.unmarkCheckboxChanges=function(){this._inheritCheckboxChanges();n.each(this._nodes,function(n,t){t.$el.removeClass("node-check-changed")})};u.prototype.disableAll=function(t){t=n.extend({},f.options,t);var i=this._findNodes("false","state.disabled");n.each(i,n.proxy(function(n,i){this._setDisabled(i,!0,t)},this))};u.prototype.disableNode=function(t,i){t instanceof Array||(t=[t]);i=n.extend({},f.options,i);n.each(t,n.proxy(function(n,t){this._setDisabled(t,!0,i)},this))};u.prototype.enableAll=function(t){t=n.extend({},f.options,t);var i=this._findNodes("true","state.disabled");n.each(i,n.proxy(function(n,i){this._setDisabled(i,!1,t)},this))};u.prototype.enableNode=function(t,i){t instanceof Array||(t=[t]);i=n.extend({},f.options,i);n.each(t,n.proxy(function(n,t){this._setDisabled(t,!1,i)},this))};u.prototype.toggleNodeDisabled=function(t,i){t instanceof Array||(t=[t]);i=n.extend({},f.options,i);n.each(t,n.proxy(function(n,t){this._setDisabled(t,!t.state.disabled,i)},this))};u.prototype.search=function(t,i){var u,r,e;return i=n.extend({},f.searchOptions,i),u=this._getSearchResults(),r=[],t&&t.length>0&&(i.exactMatch&&(t="^"+t+"$"),e="g",i.ignoreCase&&(e+="i"),r=this._findNodes(t,"text",e)),n.each(this._diffArray(r,u),n.proxy(function(n,t){this._setSearchResult(t,!1,i)},this)),n.each(this._diffArray(u,r),n.proxy(function(n,t){this._setSearchResult(t,!0,i)},this)),r&&i.revealResults&&this.revealNode(r),this._triggerEvent("searchComplete",r,i),r};u.prototype.getNodeById=function(t,i){var r,u;return i=n.extend({},f.searchOptions,i),this.clearSearch({render:!1}),r=[],t&&t.length>0&&(i.exactMatch&&(t="^"+t+"$"),u="g",i.ignoreCase&&(u+="i"),r=this.findNodes(t,u,"id"),n.each(r,function(n,t){t.searchResult=!0})),i.revealResults?this.revealNode(r):this.render(),this.$element.trigger("searchComplete",n.extend(!0,{},r)),r};u.prototype.clearSearch=function(t){t=n.extend({},{render:!0},t);var i=n.each(this._getSearchResults(),n.proxy(function(n,i){this._setSearchResult(i,!1,t)},this));this._triggerEvent("searchCleared",i,t)};u.prototype._getSearchResults=function(){return this._findNodes("true","searchResult")};u.prototype._diffArray=function(t,i){var r=[];return n.grep(i,function(i){n.inArray(i,t)===-1&&r.push(i)}),r};u.prototype._findNodes=function(t,i,r){return i=i||"text",r=r||"g",n.grep(this._orderedNodes,n.proxy(function(n){var u=this._getNodeValue(n,i);if(typeof u=="string")return u.match(new RegExp(t,r))},this))};u.prototype._getNodeValue=function(n,t){var i=t.indexOf("."),u,f;return i>0?(u=n[t.substring(0,i)],f=t.substring(i+1,t.length),this._getNodeValue(u,f)):n.hasOwnProperty(t)&&n[t]!==r?n[t].toString():r};o=function(n){t.console&&t.console.error(n)};n.fn[e]=function(t,i){var r;if(this.length==0)throw"No element has been found!";return this.each(function(){var f=n.data(this,e);typeof t=="string"?f?n.isFunction(f[t])&&t.charAt(0)!=="_"?(i instanceof Array||(i=[i]),r=f[t].apply(f,i)):o("No such method : "+t):o("Not initialized, can not call method : "+t):typeof t=="boolean"?r=f:n.data(this,e,new u(this,n.extend(!0,{},t)))}),r||this}})(jQuery,window,document);
/*
//# sourceMappingURL=bootstrap-treeview.min.js.map
*/